@startuml Component to Class Mapping

skinparam rectangle {
    BackgroundColor<<component>> LightBlue
    BackgroundColor<<class>> LightYellow
    BorderColor Black
}

skinparam note {
    BackgroundColor LightGreen
    BorderColor DarkGreen
}

title Component to Class Mapping - Layered Architecture

' ==================== PRESENTATION LAYER ====================
rectangle "PRESENTATION LAYER" {
    rectangle "UserController Component" <<component>> as UC_COMP
    rectangle "UserController.java" <<class>> as UC_CLASS
    UC_COMP -down-> UC_CLASS : implements
    
    rectangle "WorkoutController Component" <<component>> as WC_COMP  
    rectangle "WorkoutController.java" <<class>> as WC_CLASS
    WC_COMP -down-> WC_CLASS : implements
    
    rectangle "GoalController Component" <<component>> as GC_COMP
    rectangle "GoalController.java" <<class>> as GC_CLASS
    GC_COMP -down-> GC_CLASS : implements
}

note right of UC_CLASS
  **Controller Layer Mapping:**
  
  Component → Class
  • UserController Component
    → UserController.java
  • WorkoutController Component
    → WorkoutController.java
  • GoalController Component
    → GoalController.java
  
  **Responsibilities:**
  • REST endpoints (@GetMapping, @PostMapping, etc.)
  • HTTP request/response handling
  • Input validation
  • Delegate to services
end note

' ==================== BUSINESS LOGIC LAYER ====================
rectangle "BUSINESS LOGIC LAYER" {
    rectangle "UserService Component" <<component>> as US_COMP
    rectangle "UserService.java (interface)\nUserServiceImpl.java" <<class>> as US_CLASS
    US_COMP -down-> US_CLASS : implements
    
    rectangle "WorkoutService Component" <<component>> as WS_COMP
    rectangle "WorkoutService.java (interface)\nWorkoutServiceImpl.java" <<class>> as WS_CLASS
    WS_COMP -down-> WS_CLASS : implements
    
    rectangle "GoalService Component" <<component>> as GS_COMP
    rectangle "GoalService.java (interface)\nGoalServiceImpl.java" <<class>> as GS_CLASS
    GS_COMP -down-> GS_CLASS : implements
}

note right of US_CLASS
  **Service Layer Mapping:**
  
  Component → Interface + Implementation
  • UserService Component
    → UserService.java (interface)
    → UserServiceImpl.java (impl)
  • WorkoutService Component
    → WorkoutService.java (interface)
    → WorkoutServiceImpl.java (impl)
  • GoalService Component
    → GoalService.java (interface)
    → GoalServiceImpl.java (impl)
  
  **Responsibilities:**
  • Business logic execution
  • Transaction management (@Transactional)
  • Service orchestration
end note

' ==================== MAPPING LAYER ====================
rectangle "DATA MAPPING LAYER" {
    rectangle "Mapper Components" <<component>> as MAPPER_COMP
    rectangle "UserMapper.java\nWorkoutMapper.java\nGoalMapper.java\nExerciseMapper.java" <<class>> as MAPPER_CLASS
    MAPPER_COMP -down-> MAPPER_CLASS : implements
    
    rectangle "DTO Components" <<component>> as DTO_COMP
    rectangle "UserDTO.java\nWorkoutDTO.java\nGoalDTO.java\nExerciseDTO.java" <<class>> as DTO_CLASS
    DTO_COMP -down-> DTO_CLASS : defines
}

note right of DTO_CLASS
  **Mapping Layer:**
  
  Mapper Components → Classes
  • UserMapper Component → UserMapper.java
  • WorkoutMapper Component → WorkoutMapper.java
  • GoalMapper Component → GoalMapper.java
  • ExerciseMapper Component → ExerciseMapper.java
  
  DTO Components → Classes
  • UserDTO, WorkoutDTO, GoalDTO, ExerciseDTO
  
  **Responsibilities:**
  • Entity ↔ DTO conversion
  • Data encapsulation
  • Password exclusion (security)
  • Circular reference prevention
end note

' ==================== DATA ACCESS LAYER ====================
rectangle "DATA ACCESS LAYER" {
    rectangle "Repository Components" <<component>> as REPO_COMP
    rectangle "UserRepository.java\nWorkoutRepository.java\nGoalRepository.java" <<class>> as REPO_CLASS
    REPO_COMP -down-> REPO_CLASS : implements
    
    rectangle "Entity Components" <<component>> as ENT_COMP
    rectangle "User.java (@Entity)\nWorkout.java (@Entity)\nGoal.java (@Entity)\nExercise.java (@Entity)" <<class>> as ENT_CLASS
    ENT_COMP -down-> ENT_CLASS : defines
}

note right of ENT_CLASS
  **Data Access Layer:**
  
  Repository Components → Interfaces
  • UserRepository → UserRepository.java
  • WorkoutRepository → WorkoutRepository.java
  • GoalRepository → GoalRepository.java
  (All extend JpaRepository)
  
  Entity Components → Entity Classes
  • User.java (@Entity, @Table)
  • Workout.java (@Entity, @Table)
  • Goal.java (@Entity, @Table)
  • Exercise.java (@Entity, @Table)
  
  **Responsibilities:**
  • Database CRUD operations
  • Custom query methods
  • JPA entity management
end note

' ==================== CONNECTORS ====================
note as CONNECTOR_NOTE
**CONNECTOR IMPLEMENTATIONS:**

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

**1. HTTP Connector** (Client ↔ Controller)
   Implementation: Spring MVC
   • @RestController annotation
   • @RequestMapping, @GetMapping, @PostMapping
   • Classes: All Controller classes
   • Example: GET /api/users → UserController.getAllUsers()

**2. Service Call Connector** (Controller ↔ Service)
   Implementation: Dependency Injection
   • Constructor-based injection
   • Pattern: private final ServiceInterface field
   • Example: UserController → UserService
   • Code:
     ```java
     public UserController(UserService userService) {
         this.userService = userService;
     }
     ```

**3. Mapper Call Connector** (Service ↔ Mapper)
   Implementation: Dependency Injection
   • Constructor-based injection
   • Pattern: private final Mapper field
   • Example: UserServiceImpl → UserMapper
   • Methods: toDTO(), toEntity(), toSimpleDTO()

**4. Repository Call Connector** (Service ↔ Repository)
   Implementation: Dependency Injection
   • Constructor-based injection
   • Pattern: private final Repository field
   • Example: UserServiceImpl → UserRepository
   • Methods: save(), findById(), findAll(), delete()

**5. JPA Connector** (Repository ↔ Database)
   Implementation: Spring Data JPA
   • Interface extends JpaRepository<Entity, ID>
   • Hibernate generates SQL queries
   • Example: UserRepository extends JpaRepository<User, Long>
   • Auto-implemented CRUD methods

**6. Entity-DTO Mapping** (Mapper ↔ Entity/DTO)
   Implementation: Manual mapping in Mapper classes
   • Methods: toDTO(), toEntity()
   • Example: UserMapper.toDTO(User) → UserDTO
   • Excludes sensitive fields (passwords)

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

**DESIGN PATTERNS:**
• Dependency Injection Pattern: All layer connections
• Repository Pattern: Data access abstraction
• DTO Pattern: Data transfer object
• Service Layer Pattern: Business logic encapsulation
• Mapper Pattern: Object transformation
• MVC Pattern: Overall architecture

end note

@enduml

