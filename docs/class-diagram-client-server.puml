@startuml Class Diagram - Client-Server Architecture

left to right direction

skinparam classAttributeIconSize 0
skinparam class {
    BackgroundColor<<client>> #D8ECFF
    BackgroundColor<<controller>> LightBlue
    BackgroundColor<<repository>> LightGreen
    BackgroundColor<<entity>> Pink
    BackgroundColor<<config>> Wheat
    BorderColor Black
}

title Client-Server Architecture - Class Diagram\n(Emphasizing Client ↔ Server Communication)

' ==================== CLIENT SIDE ====================
package "CLIENT (React/Vite Application)" <<client>> {
    class App <<client>> {
        - router: Router
        - authState: AuthState
        + render(): JSX.Element
    }
    
    class LoginScreen <<client>> {
        - apiClient: ApiClient
        + handleLogin(credentials): void
        + render(): JSX.Element
    }
    
    class DashboardScreen <<client>> {
        - apiClient: ApiClient
        + loadUserData(): void
        + render(): JSX.Element
    }
    
    class WorkoutLogScreen <<client>> {
        - apiClient: ApiClient
        + createWorkout(data): void
        + updateWorkout(id, data): void
        + render(): JSX.Element
    }
    
    class GoalSettingScreen <<client>> {
        - apiClient: ApiClient
        + createGoal(data): void
        + updateProgress(id, value): void
        + render(): JSX.Element
    }
    
    class ProfileScreen <<client>> {
        - apiClient: ApiClient
        + updateProfile(data): void
        + render(): JSX.Element
    }
    
    class ApiClient <<client>> {
        - baseUrl: String
        + getUsers(): Promise<User[]>
        + getUserById(id: Long): Promise<User>
        + createUser(data: Object): Promise<User>
        + updateUser(id: Long, data: Object): Promise<User>
        + deleteUser(id: Long): Promise<void>
        + getWorkouts(): Promise<Workout[]>
        + createWorkout(data: Object): Promise<Workout>
        + getGoals(): Promise<Goal[]>
        + createGoal(data: Object): Promise<Goal>
    }
    
    App --> LoginScreen
    App --> DashboardScreen
    App --> WorkoutLogScreen
    App --> GoalSettingScreen
    App --> ProfileScreen
    
    LoginScreen --> ApiClient
    DashboardScreen --> ApiClient
    WorkoutLogScreen --> ApiClient
    GoalSettingScreen --> ApiClient
    ProfileScreen --> ApiClient
}

note top of "CLIENT (React/Vite Application)"
    **Client Responsibilities:**
    • UI rendering and user interactions
    • State management (React hooks)
    • Form validation
    • API calls via fetch/axios
    • Runs in browser (localhost:5173)
end note

' ==================== HTTP BOUNDARY ====================
note as HTTP_BOUNDARY
    ═══════════════════════════════════════════════════════════════
    **CLIENT ↔ SERVER COMMUNICATION BOUNDARY**
    
    Protocol: HTTP/HTTPS
    Format: JSON
    Methods: GET, POST, PUT, DELETE
    Base URL: http://localhost:8081/api
    
    Example Request:
    POST /api/workouts
    Content-Type: application/json
    Body: {"name": "Morning Run", "userId": 1, ...}
    
    Example Response:
    200 OK
    Content-Type: application/json
    Body: {"id": 123, "name": "Morning Run", ...}
    ═══════════════════════════════════════════════════════════════
end note

' ==================== SERVER SIDE ====================
package "SERVER (Spring Boot Application)" {
    ' Controllers
    package "Controllers (Presentation Layer)" <<controller>> {
        class UserController <<controller>> {
            - userRepository: UserRepository
            + getAllUsers(): List<User>
            + getUserById(id: Long): ResponseEntity<User>
            + getUserByUsername(username: String): ResponseEntity<User>
            + createUser(request: JsonNode): User
            + updateUser(id: Long, user: User): ResponseEntity<User>
            + deleteUser(id: Long): ResponseEntity<Void>
        }
        
        class WorkoutController <<controller>> {
            - workoutRepository: WorkoutRepository
            - userRepository: UserRepository
            + getAllWorkouts(): List<Workout>
            + getWorkoutById(id: Long): ResponseEntity<Workout>
            + getWorkoutsByUserId(userId: Long): List<Workout>
            + createWorkout(request: JsonNode): ResponseEntity<Workout>
            + updateWorkout(id: Long, workout: Workout): ResponseEntity<Workout>
            + deleteWorkout(id: Long): ResponseEntity<Void>
            + getWorkoutsByUserAndType(userId: Long, type: String): List<Workout>
            + getWorkoutsByDateRange(userId: Long, start: String, end: String): List<Workout>
        }
        
        class GoalController <<controller>> {
            - goalRepository: GoalRepository
            - userRepository: UserRepository
            + getAllGoals(): List<Goal>
            + getGoalById(id: Long): ResponseEntity<Goal>
            + getGoalsByUserId(userId: Long): List<Goal>
            + getGoalsByUserAndStatus(userId: Long, status: String): List<Goal>
            + getGoalsByUserAndCategory(userId: Long, category: String): List<Goal>
            + createGoal(request: JsonNode): ResponseEntity<Goal>
            + updateGoal(id: Long, goal: Goal): ResponseEntity<Goal>
            + deleteGoal(id: Long): ResponseEntity<Void>
        }
    }
    
    ' Repositories
    package "Repositories (Data Access Layer)" <<repository>> {
        interface UserRepository <<repository>> {
            + findAll(): List<User>
            + findById(id: Long): Optional<User>
            + save(user: User): User
            + deleteById(id: Long): void
            + existsById(id: Long): boolean
            + findByUsername(username: String): Optional<User>
            + findByEmail(email: String): Optional<User>
        }
        
        interface WorkoutRepository <<repository>> {
            + findAll(): List<Workout>
            + findById(id: Long): Optional<Workout>
            + save(workout: Workout): Workout
            + deleteById(id: Long): void
            + existsById(id: Long): boolean
            + findByUserId(userId: Long): List<Workout>
            + findByUserIdAndType(userId: Long, type: String): List<Workout>
            + findByUserIdAndStartTimeBetween(userId: Long, start: LocalDateTime, end: LocalDateTime): List<Workout>
        }
        
        interface GoalRepository <<repository>> {
            + findAll(): List<Goal>
            + findById(id: Long): Optional<Goal>
            + save(goal: Goal): Goal
            + deleteById(id: Long): void
            + existsById(id: Long): boolean
            + findByUserId(userId: Long): List<Goal>
            + findByUserIdAndStatus(userId: Long, status: String): List<Goal>
            + findByUserIdAndCategory(userId: Long, category: String): List<Goal>
        }
        
        note right of UserRepository
            **Spring Data JPA**
            Extends JpaRepository<User, Long>
            Auto-implementation by Spring
        end note
    }
    
    ' Entities
    package "Entities (Domain Model)" <<entity>> {
        class User <<entity>> {
            - id: Long
            - username: String
            - email: String
            - password: String
            - firstName: String
            - lastName: String
            - dateOfBirth: LocalDate
            - gender: String
            - height: Double
            - weight: Double
            - fitnessLevel: String
            - workouts: List<Workout>
            - goals: List<Goal>
            + getId(): Long
            + setId(id: Long): void
            + getUsername(): String
            + setUsername(username: String): void
            {All getters/setters}
        }
        
        class Workout <<entity>> {
            - id: Long
            - name: String
            - description: String
            - startTime: LocalDateTime
            - endTime: LocalDateTime
            - duration: Integer
            - type: String
            - caloriesBurned: Integer
            - user: User
            - exercises: List<Exercise>
            + getId(): Long
            + setId(id: Long): void
            + getName(): String
            + setName(name: String): void
            {All getters/setters}
        }
        
        class Goal <<entity>> {
            - id: Long
            - title: String
            - description: String
            - targetDate: LocalDate
            - startDate: LocalDate
            - status: String
            - category: String
            - targetValue: Double
            - unit: String
            - currentValue: Double
            - user: User
            + getId(): Long
            + setId(id: Long): void
            + getTitle(): String
            + setTitle(title: String): void
            {All getters/setters}
        }
        
        class Exercise <<entity>> {
            - id: Long
            - name: String
            - description: String
            - category: String
            - sets: Integer
            - reps: Integer
            - weight: Double
            - duration: Integer
            - restTime: Integer
            - workout: Workout
            + getId(): Long
            + setId(id: Long): void
            + getName(): String
            + setName(name: String): void
            {All getters/setters}
        }
    }
    
    ' Configuration
    package "Configuration" <<config>> {
        class SecurityConfig <<config>> {
            + securityFilterChain(http: HttpSecurity): SecurityFilterChain
        }
        
        class CorsConfig <<config>> {
            + corsConfigurer(): WebMvcConfigurer
        }
    }
    
    ' Server internal relationships
    UserController --> UserRepository : uses
    WorkoutController --> WorkoutRepository : uses
    WorkoutController --> UserRepository : uses
    GoalController --> GoalRepository : uses
    GoalController --> UserRepository : uses
    
    UserRepository ..> User : manages
    WorkoutRepository ..> Workout : manages
    GoalRepository ..> Goal : manages
    
    UserController ..> User : returns/receives
    WorkoutController ..> Workout : returns/receives
    GoalController ..> Goal : returns/receives
    
    User "1" *-- "0..*" Workout : has
    User "1" *-- "0..*" Goal : has
    Workout "1" *-- "0..*" Exercise : contains
}

note top of "SERVER (Spring Boot Application)"
    **Server Responsibilities:**
    • REST API endpoints (@RestController)
    • Business logic and validation
    • Data persistence (JPA/Hibernate)
    • Database transactions
    • Runs on localhost:8081
end note

' ==================== CLIENT-SERVER CONNECTION ====================
ApiClient -right-> UserController : HTTP GET/POST/PUT/DELETE\n/api/users
ApiClient -right-> WorkoutController : HTTP GET/POST/PUT/DELETE\n/api/workouts
ApiClient -right-> GoalController : HTTP GET/POST/PUT/DELETE\n/api/goals

note bottom
    **Client-Server Architecture Characteristics:**
    • Clear separation between client (UI) and server (business logic + data)
    • Communication via HTTP/REST over network
    • Client makes requests → Server processes → Client receives responses
    • Single request/response boundary
    • Stateless communication (each request is independent)
    
    **Contrast with Layered Architecture:**
    • Layered focuses on VERTICAL hierarchy within the server
    • Client-Server focuses on HORIZONTAL separation across network
end note

note bottom of User
  **@Entity**
  @Table(name = "users")
  @OneToMany relationships:
  • workouts (mapped by user)
  • goals (mapped by user)
end note

note bottom of Workout
  **@Entity**
  @Table(name = "workouts")
  @ManyToOne: user
  @OneToMany: exercises
end note

@enduml
